<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="NetxTrust transforma tus PDFs complejos en materiales estratégicos con agentes de IA especializados: resúmenes, análisis de datos, infografías y más."/>
  
  <!-- Open Graph / Social sharing -->
  <meta property="og:title" content="NetxTrust - Transforma tus documentos con IA" />
  <meta property="og:description" content="Sube tu PDF y obtén resúmenes ejecutivos, análisis profundo o materiales educativos generados por IA." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://pedro-ia-netxtrust.github.io/edu_netxtrust/" />
  
  <title>NetxTrust - Transforma tus documentos con IA</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #0f172a;
      color: #f1f5f9;
    }
    .glass {
      background: rgba(30, 41, 59, 0.6);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1.5rem;
    }
    .neon-cyan {
      box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
    }
    .card {
      transition: all 0.3s ease;
    }
    .card-selected {
      border: 2px solid #06b6d4;
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(6, 182, 212, 0.2);
    }
    .card:hover {
      transform: translateY(-4px);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Hero Section -->
  <section class="py-16 md:py-24 px-4 text-center">
    <div class="max-w-4xl mx-auto">
      <h1 class="text-4xl md:text-6xl font-bold mb-6 leading-tight">
        Desbloquea el conocimiento de tus documentos
      </h1>
      <p class="text-lg md:text-xl text-slate-300 max-w-2xl mx-auto mb-10">
        Transforma PDFs complejos en activos estratégicos con nuestros agentes de IA especializados.
      </p>
      <button onclick="document.getElementById('upload-section').scrollIntoView({behavior: 'smooth'})"
              class="px-10 py-4 bg-cyan-500 hover:bg-cyan-600 text-white font-bold rounded-full text-lg transition-all duration-300 neon-cyan shadow-lg">
        Comenzar ahora
      </button>
    </div>
  </section>

  <!-- Main Form Section -->
  <section id="upload-section" class="flex-1 container mx-auto px-4 pb-20 max-w-5xl">
    <form id="mainForm" novalidate>
      <!-- Error Message -->
      <div id="errorMsg" class="glass p-4 mb-8 text-red-400 text-center hidden" role="alert"></div>

      <!-- Dropzone -->
      <div class="glass p-8 mb-10 text-center">
        <div id="dropzone" 
             class="border-2 border-dashed border-slate-600 rounded-2xl p-12 cursor-pointer transition-all duration-300 hover:border-cyan-500"
             role="button" aria-label="Zona de carga de archivo">
          <p class="text-xl mb-4">Arrastra tu documento PDF aquí</p>
          <p class="text-sm text-slate-400 mb-6">Máximo 10MB • Solo PDF</p>
          <input type="file" id="fileInput" accept="application/pdf" class="hidden" aria-label="Seleccionar archivo PDF" />
          <button type="button" onclick="document.getElementById('fileInput').click()"
                  class="px-6 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl transition-colors font-medium">
            Seleccionar archivo
          </button>
        </div>
        <p id="fileName" class="mt-4 text-lg text-cyan-400 font-semibold" aria-live="polite"></p>
        <p id="fileError" class="mt-4 text-red-400 font-medium hidden" aria-live="assertive"></p>
      </div>

      <!-- Strategy Selector -->
      <div class="glass p-8 mb-10">
        <h2 class="text-2xl md:text-3xl font-bold mb-8 text-center">Selecciona tu estrategia de IA</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Síntesis -->
          <label class="card glass p-8 cursor-pointer" id="card-sintesis">
            <input type="radio" name="strategy" value="sintesis" class="sr-only" required>
            <div class="text-center">
              <div class="w-16 h-16 bg-cyan-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="h-8 w-8 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <h3 class="font-bold text-xl mb-3">Síntesis y Análisis</h3>
              <p class="text-sm text-slate-400">Resúmenes claros y concisos con enfoque en lo esencial</p>
            </div>
          </label>

          <!-- Datos -->
          <label class="card glass p-8 cursor-pointer" id="card-datos">
            <input type="radio" name="strategy" value="datos" class="sr-only" required>
            <div class="text-center">
              <div class="w-16 h-16 bg-violet-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="h-8 w-8 text-violet-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
              </div>
              <h3 class="font-bold text-xl mb-3">Inteligencia de Datos</h3>
              <p class="text-sm text-slate-400">Análisis profundo, patrones y crítica</p>
            </div>
          </label>

          <!-- Pedagogía -->
          <label class="card glass p-8 cursor-pointer" id="card-pedagogia">
            <input type="radio" name="strategy" value="pedagogia" class="sr-only" required>
            <div class="text-center">
              <div class="w-16 h-16 bg-cyan-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="h-8 w-8 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
              </div>
              <h3 class="font-bold text-xl mb-3">Guía Visual y Pedagogía</h3>
              <p class="text-sm text-slate-400">Infografías, mapas conceptuales y guías</p>
            </div>
          </label>
        </div>
      </div>

      <!-- Subgroup -->
      <div class="glass p-8 mb-10">
        <h2 class="text-2xl font-bold mb-6 text-center">Configuración detallada</h2>
        <select id="subgroupSelect" class="w-full p-4 rounded-xl bg-slate-800 border border-slate-600 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500" disabled required>
          <option value="">Selecciona una estrategia primero</option>
        </select>
      </div>

      <!-- Context & Options -->
      <div class="glass p-8 mb-10">
        <h2 class="text-2xl font-bold mb-8 text-center">Contexto adicional</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div>
            <label for="subject" class="block text-sm font-medium mb-2">Asignatura</label>
            <select id="subject" class="w-full p-4 rounded-lg bg-slate-800 border border-slate-600 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500">
              <option value="matematicas">Matemáticas</option>
              <option value="ciencias">Ciencias</option>
              <option value="lenguaje">Lenguaje</option>
              <option value="historia">Historia</option>
              <option value="tecnologia">Tecnología</option>
              <option value="corporativo">Corporativo</option>
            </select>
          </div>
          <div>
            <label for="level" class="block text-sm font-medium mb-2">Nivel</label>
            <select id="level" class="w-full p-4 rounded-lg bg-slate-800 border border-slate-600 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500">
              <option value="basico">Básico</option>
              <option value="medio">Medio</option>
              <option value="superior">Superior</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <label class="flex items-center space-x-3">
            <input type="checkbox" id="criticalThinking" class="w-5 h-5 text-cyan-500 rounded focus:ring-cyan-500">
            <span>Modo Pensamiento Crítico</span>
          </label>
          <label class="flex items-center space-x-3">
            <input type="checkbox" id="ocrVision" class="w-5 h-5 text-violet-500 rounded focus:ring-violet-500">
            <span>Activación de OCR/Visión</span>
          </label>
        </div>

        <div>
          <label for="email" class="block text-sm font-medium mb-2">Email <span class="text-red-400">*</span></label>
          <input type="email" id="email" required class="w-full p-4 rounded-lg bg-slate-800 border border-slate-600 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500" placeholder="tu@email.com">
        </div>
      </div>

      <!-- Submit -->
      <div class="text-center">
        <button type="submit" id="submitBtn"
                class="px-12 py-5 bg-gradient-to-r from-cyan-500 to-violet-600 hover:from-cyan-600 hover:to-violet-700 text-white font-bold rounded-full text-xl transition-all duration-300 neon-cyan shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed">
          <span id="btnText">Generar Material Estratégico</span>
          <svg id="spinner" class="hidden animate-spin inline ml-3 h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
        </button>
        <p id="timeWarning" class="mt-6 text-sm text-slate-400 hidden">Procesos con OCR pueden tardar hasta 2 minutos.</p>
      </div>
    </form>
  </section>

  <!-- Footer -->
  <footer class="border-t border-slate-800 py-8 px-4 text-center text-slate-400 mt-auto">
    <p class="mb-2">© 2026 NetxTrust - Transformando documentos en conocimiento estratégico</p>
    <p>Contacto: info@netxtrust.com | +56 9 1234 5678</p>
  </footer>

  <script>
    // Datos de subgrupos
    const subgroups = {
      sintesis: [
        { value: "ejecutivo", label: "Resumen Ejecutivo" },
        { value: "tecnico", label: "Análisis Técnico Breve" },
        { value: "didactico", label: "Síntesis Didáctica" }
      ],
      datos: [
        { value: "patrones", label: "Detección de Patrones" },
        { value: "critica", label: "Análisis Crítico" },
        { value: "extraccion", label: "Extracción de Entidades" }
      ],
      pedagogia: [
        { value: "infografia", label: "Infografía Visual" },
        { value: "guia", label: "Guía de Estudio" },
        { value: "mapa", label: "Mapa Conceptual" }
      ]
    };

    let selectedFile = null;
    const form = document.getElementById('mainForm');
    const errorMsg = document.getElementById('errorMsg');

    // Manejo de archivo
    document.getElementById('dropzone').addEventListener('dragover', e => {
      e.preventDefault();
      e.currentTarget.classList.add('border-cyan-500', 'bg-cyan-500/10');
    });

    document.getElementById('dropzone').addEventListener('dragleave', e => {
      e.preventDefault();
      e.currentTarget.classList.remove('border-cyan-500', 'bg-cyan-500/10');
    });

    document.getElementById('dropzone').addEventListener('drop', e => {
      e.preventDefault();
      e.currentTarget.classList.remove('border-cyan-500', 'bg-cyan-500/10');
      if (e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
    });

    document.getElementById('fileInput').addEventListener('change', e => {
      if (e.target.files.length) handleFile(e.target.files[0]);
    });

    function handleFile(file) {
      const fileNameEl = document.getElementById('fileName');
      const fileErrorEl = document.getElementById('fileError');

      if (file.size > 10 * 1024 * 1024) {
        showFileError('El archivo excede los 10MB');
        selectedFile = null;
        return;
      }

      if (file.type !== 'application/pdf') {
        showFileError('Solo se permiten archivos PDF');
        selectedFile = null;
        return;
      }

      fileErrorEl.classList.add('hidden');
      fileNameEl.textContent = `✓ ${file.name}`;
      selectedFile = file;
    }

    function showFileError(msg) {
      document.getElementById('fileError').textContent = msg;
      document.getElementById('fileError').classList.remove('hidden');
      document.getElementById('fileName').textContent = '';
    }

    // Actualizar subgrupos y estilo de tarjetas
    document.querySelectorAll('input[name="strategy"]').forEach(input => {
      input.addEventListener('change', () => {
        const value = input.value;
        updateSubgroups(value);
      });
    });

    function updateSubgroups(strategy) {
      const select = document.getElementById('subgroupSelect');
      select.innerHTML = '<option value="">Elige una opción...</option>';
      select.disabled = false;

      subgroups[strategy].forEach(opt => {
        const option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        select.appendChild(option);
      });

      // Estilo visual de selección
      document.querySelectorAll('.card').forEach(card => {
        card.classList.toggle('card-selected', card.querySelector('input').checked);
      });
    }

    // Envío del formulario
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorMsg.classList.add('hidden');

      const email = document.getElementById('email').value.trim();
      const strategy = document.querySelector('input[name="strategy"]:checked');
      const subgroup = document.getElementById('subgroupSelect').value;

      if (!selectedFile) return showError('Por favor, sube un archivo PDF');
      if (!strategy) return showError('Selecciona una estrategia de IA');
      if (!subgroup) return showError('Elige una configuración detallada');
      if (!email || !email.includes('@')) return showError('Ingresa un email válido');

      const btn = document.getElementById('submitBtn');
      const btnText = document.getElementById('btnText');
      const spinner = document.getElementById('spinner');
      const warning = document.getElementById('timeWarning');

      btn.disabled = true;
      btnText.textContent = 'Procesando documento...';
      spinner.classList.remove('hidden');
      if (document.getElementById('ocrVision').checked) warning.classList.remove('hidden');

      const formData = new FormData();
      formData.append('data', selectedFile);

      const metadata = {
        email,
        fileName: selectedFile.name,
        strategy: strategy.value,
        subgroup,
        subject: document.getElementById('subject').value,
        level: document.getElementById('level').value,
        options: {
          critical: document.getElementById('criticalThinking').checked,
          ocr: document.getElementById('ocrVision').checked
        },
        timestamp: new Date().toISOString(),
        sourceUrl: window.location.href  // Enviamos la URL de origen para referencia
      };
      formData.append('metadata', JSON.stringify(metadata));

      try {
        const response = await fetch('https://n8n.srv1020196.hstgr.cloud/webhook-test/https://pedro-ia-netxtrust.github.io/edu_netxtrust/', {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          alert('¡Perfecto! Estamos generando tu material. Lo recibirás pronto en tu correo.');
          form.reset();
          selectedFile = null;
          document.getElementById('fileName').textContent = '';
          document.getElementById('subgroupSelect').disabled = true;
          document.querySelectorAll('.card').forEach(c => c.classList.remove('card-selected'));
        } else {
          throw new Error('Error del servidor: ' + response.status);
        }
      } catch (err) {
        console.error(err);
        showError('Error al enviar el documento. Verifica tu conexión o inténtalo más tarde.');
      } finally {
        btn.disabled = false;
        btnText.textContent = 'Generar Material Estratégico';
        spinner.classList.add('hidden');
        warning.classList.add('hidden');
      }
    });

    function showError(msg) {
      errorMsg.textContent = msg;
      errorMsg.classList.remove('hidden');
      errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  </script>
</body>
</html>
